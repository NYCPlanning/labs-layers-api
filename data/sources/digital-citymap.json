{
  "id": "digital-citymap",
  "type": "cartovector",
  "source-layers": [
    {
      "id": "bulkhead-lines",
      "sql": "SELECT the_geom_webmercator, jurisdicti FROM dcm WHERE feature_ty = 'Bulkhead_line' AND type <> 'Former_ROW'"
    },
    {
      "id": "arterials",
      "sql": "SELECT the_geom_webmercator, route_type FROM dcm_arterials_mjr_sts"
    },
    {
      "id": "pierhead-lines",
      "sql": "SELECT the_geom_webmercator, jurisdicti FROM dcm WHERE feature_ty = 'Pierhead_line' AND type <> 'Former_ROW'"
    },
    {
      "id": "amendments",
      "sql": "SELECT the_geom_webmercator, ST_Area(the_geom) as area, cartodb_id AS id, altmappdf, extract(epoch from effective) as effective, status FROM dcm_citymapchanges WHERE effective IS NOT NULL OR status = '13' ORDER BY area DESC"
    },
    {
      "id": "street-centerlines",
      "sql": "SELECT the_geom_webmercator, row_name AS streetname, COALESCE('   (' || streetwidt || ' ft)') AS streetwidth, roadway_ty, feature_st FROM dcm_scl WHERE route_type <> 'Former_ROW'"
    },
    {
      "id": "citymap",
      "sql": "SELECT the_geom_webmercator, type, boro_nm FROM dcm WHERE type <> 'Former_ROW' AND feature_ty NOT IN ('Pierhead_line', 'Bulkhead_line', 'Rail')"
    },
    {
      "id": "name-changes-points",
      "sql": "SELECT the_geom_webmercator, intronumbe, intro_year, ll_effecti, CASE WHEN honoraryna = 'none' THEN officialna ELSE honoraryna END FROM dcm_streetnamechanges_points"
    },
    {
      "id": "name-changes-lines",
      "sql": "SELECT the_geom_webmercator, intnum AS intronumbe, int_yr AS intro_year, ll_effect AS ll_effecti, CASE WHEN hon_nm = 'none' THEN officialna ELSE hon_nm END AS honoraryna FROM planninglabs.dcm_streetnamechanges_lines"
    },
    {
      "id": "name-changes-areas",
      "sql": "SELECT the_geom_webmercator, intronumbe, intro_year, ll_effecti, CASE WHEN honoraryna = 'none' THEN officialna ELSE honoraryna END FROM dcm_streetnamechanges_areas"
    },
    {
      "id": "rail-lines",
      "sql": "SELECT the_geom_webmercator, '' AS street FROM dcm WHERE feature_ty = 'Rail' AND type <> 'Former_ROW'"
    }
  ],
  "meta": {
    "description": "NYC Department of City Planning Technical Review Division",
    "url": [
      "WAITING ON REAL URL"
    ],
    "updated_at": "December 2019"
  }
}
